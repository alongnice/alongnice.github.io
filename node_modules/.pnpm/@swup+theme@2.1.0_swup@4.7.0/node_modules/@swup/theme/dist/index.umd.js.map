{"version":3,"file":"index.umd.js","sources":["../node_modules/@swup/plugin/dist/index.modern.js","../src/index.ts"],"sourcesContent":["function r(){return r=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r},r.apply(this,arguments)}const n=r=>String(r).split(\".\").map(r=>String(parseInt(r||\"0\",10))).concat([\"0\",\"0\"]).slice(0,3).join(\".\");class e{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach(r=>r()),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error(\"You must define a name of plugin when creating a class.\")}_afterUnmount(){}_checkRequirements(){return\"object\"!=typeof this.requires||Object.entries(this.requires).forEach(([r,e])=>{if(!function(r,e,t){const s=function(r,n){var e;if(\"swup\"===r)return null!=(e=n.version)?e:\"\";{var t;const e=n.findPlugin(r);return null!=(t=null==e?void 0:e.version)?t:\"\"}}(r,t);return!!s&&((r,e)=>e.every(e=>{const[,t,s]=e.match(/^([\\D]+)?(.*)$/)||[];var o,i;return((r,n)=>{const e={\"\":r=>0===r,\">\":r=>r>0,\">=\":r=>r>=0,\"<\":r=>r<0,\"<=\":r=>r<=0};return(e[n]||e[\"\"])(r)})((i=s,o=n(o=r),i=n(i),o.localeCompare(i,void 0,{numeric:!0})),t||\">=\")}))(s,e)}(r,e=Array.isArray(e)?e:[e],this.swup)){const n=`${r} ${e.join(\", \")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${n}`)}}),!0}on(r,n,e={}){var t;n=!(t=n).name.startsWith(\"bound \")||t.hasOwnProperty(\"prototype\")?n.bind(this):n;const s=this.swup.hooks.on(r,n,e);return this.handlersToUnregister.push(s),s}once(n,e,t={}){return this.on(n,e,r({},t,{once:!0}))}before(n,e,t={}){return this.on(n,e,r({},t,{before:!0}))}replace(n,e,t={}){return this.on(n,e,r({},t,{replace:!0}))}off(r,n){return this.swup.hooks.off(r,n)}}export{e as default};\n//# sourceMappingURL=index.modern.js.map\n","import Plugin from '@swup/plugin';\n\nexport default abstract class Theme extends Plugin {\n\t_originalAnimationSelectorOption: string = '';\n\t_addedStyleElements: Element[] = [];\n\t_addedHTMLContent: Element[] = [];\n\t_classNameAddedToElements: ({ selector: string, name: string })[] = [];\n\n\t_beforeMount() {\n\t\t// Store original animationSelector option, then replace it\n\t\tthis._originalAnimationSelectorOption = String(this.swup.options.animationSelector);\n\t\tthis.swup.options.animationSelector = '[class*=\"swup-transition-\"]';\n\n\t\t// Add classes after each content replace\n\t\tthis.swup.hooks.on('content:replace', this._addClassNameToElement);\n\t}\n\n\t_afterUnmount() {\n\t\t// Restore original animationSelector option\n\t\tthis.swup.options.animationSelector = this._originalAnimationSelectorOption;\n\n\t\t// Remove added styles\n\t\tthis._addedStyleElements.forEach((element) => {\n\t\t\telement.outerHTML = '';\n\t\t});\n\t\tthis._addedStyleElements = [];\n\n\t\t// Remove added HTML\n\t\tthis._addedHTMLContent.forEach((element) => {\n\t\t\telement.outerHTML = '';\n\t\t});\n\t\tthis._addedHTMLContent = [];\n\n\t\t// Remove added classnames\n\t\tthis._classNameAddedToElements.forEach((item) => {\n\t\t\tconst elements = Array.from(document.querySelectorAll(item.selector));\n\t\t\telements.forEach((element) => {\n\t\t\t\telement.className.split(' ').forEach((classItem) => {\n\t\t\t\t\tif (new RegExp('^swup-transition-').test(classItem)) {\n\t\t\t\t\t\telement.classList.remove(classItem);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tthis.swup.hooks.off('content:replace', this._addClassNameToElement);\n\t}\n\n\tapplyStyles(styles: string) {\n\t\tconst style = document.createElement('style');\n\t\tstyle.setAttribute('data-swup-theme', '');\n\t\tstyle.appendChild(document.createTextNode(styles));\n\t\tdocument.head.prepend(style);\n\n\t\tthis._addedStyleElements.push(style);\n\t}\n\n\tapplyHTML(content: string) {\n\t\tconst element = document.createElement('div');\n\t\telement.innerHTML = content;\n\t\tdocument.body.appendChild(element);\n\n\t\tthis._addedHTMLContent.push(element);\n\t}\n\n\taddClassName(selector: string, name: string) {\n\t\t// save so it can be later removed\n\t\tthis._classNameAddedToElements.push({ selector, name });\n\n\t\t// add class the first time\n\t\tthis._addClassNameToElement();\n\t}\n\n\t_addClassNameToElement = () => {\n\t\tthis._classNameAddedToElements.forEach((item) => {\n\t\t\tconst elements = Array.from(document.querySelectorAll(item.selector));\n\t\t\telements.forEach((element) => {\n\t\t\t\telement.classList.add(`swup-transition-${item.name}`);\n\t\t\t});\n\t\t});\n\t};\n}\n"],"names":["n","r","String","split","map","parseInt","concat","slice","join","e","every","t","s","match","o","i","localeCompare","numeric","Plugin","constructor","arguments","_originalAnimationSelectorOption","this","_addedStyleElements","_addedHTMLContent","_classNameAddedToElements","_addClassNameToElement","forEach","item","Array","from","document","querySelectorAll","selector","element","classList","add","name","_beforeMount","swup","options","animationSelector","hooks","on","_afterUnmount","outerHTML","className","classItem","RegExp","test","remove","off","applyStyles","styles","style","createElement","setAttribute","appendChild","createTextNode","head","prepend","push","applyHTML","content","innerHTML","body","addClassName"],"mappings":"gcAGO,MAAMA,EAAoBC,GACzBC,OAAOD,GACZE,MAAM,KACNC,IAAIH,GAAWC,OAAOG,SAASJ,GAAW,IAAK,MAC/CK,OAAO,CAAC,IAAK,MACbC,MAAM,EAAG,GACTC,KAAK,KAAA,0nBAiCwB,EAACP,EAAmBQ,IAC5CA,EAAaC,MAAOD,IAC1B,MAASE,CAAAA,EAAYC,GAAWH,EAASI,MAAM,mBAAqB,GA/BxC,IAACC,EAAWC,EAiCxC,MA1BsB,EAACd,EAA0BD,KAClD,MAAMS,EAAc,CACnB,GAAKR,GAAoB,IAANA,EACnB,IAAMA,GAAcA,EAAI,EACxB,KAAOA,GAAcA,GAAK,EAC1B,IAAMA,GAAcA,EAAI,EACxB,KAAOA,GAAcA,GAAK,GAG3B,OADqBQ,EAAYT,IAAeS,EAAY,KACxCR,EAhBqBc,EAOlB,EAPkBA,EAgCWH,EA/BpDE,EAAId,EAD0Bc,EAgCWb,GA9BzCc,EAAIf,EAAiBe,GACdD,EAAEE,cAAcD,OAAA,EAAc,CAAEE,SAAS,KA8BLN,GAA6B,KAAI,GAJ7C,qiBCxCF,cAAcO,EAAMC,WAAAA,GAAAC,SAAAA,gBACjDC,iCAA2C,GAAEC,KAC7CC,oBAAiC,GACjCC,KAAAA,kBAA+B,GAAEF,KACjCG,0BAAoE,GAmEpEC,KAAAA,uBAAyB,KACxBJ,KAAKG,0BAA0BE,QAASC,IACtBC,MAAMC,KAAKC,SAASC,iBAAiBJ,EAAKK,WAClDN,QAASO,IACjBA,EAAQC,UAAUC,IAAuB,mBAAAR,EAAKS,OAAM,EAEtD,GACA,CAxEDC,YAAAA,GAEChB,KAAKD,iCAAmCnB,OAAOoB,KAAKiB,KAAKC,QAAQC,mBACjEnB,KAAKiB,KAAKC,QAAQC,kBAAoB,8BAGtCnB,KAAKiB,KAAKG,MAAMC,GAAG,kBAAmBrB,KAAKI,uBAC5C,CAEAkB,aAAAA,GAECtB,KAAKiB,KAAKC,QAAQC,kBAAoBnB,KAAKD,iCAG3CC,KAAKC,oBAAoBI,QAASO,IACjCA,EAAQW,UAAY,KAErBvB,KAAKC,oBAAsB,GAG3BD,KAAKE,kBAAkBG,QAASO,IAC/BA,EAAQW,UAAY,KAErBvB,KAAKE,kBAAoB,GAGzBF,KAAKG,0BAA0BE,QAASC,IACtBC,MAAMC,KAAKC,SAASC,iBAAiBJ,EAAKK,WAClDN,QAASO,IACjBA,EAAQY,UAAU3C,MAAM,KAAKwB,QAASoB,IACjC,IAAIC,OAAO,qBAAqBC,KAAKF,IACxCb,EAAQC,UAAUe,OAAOH,EACzB,IAEF,GAGFzB,KAAKiB,KAAKG,MAAMS,IAAI,kBAAmB7B,KAAKI,uBAC7C,CAEA0B,WAAAA,CAAYC,GACX,MAAMC,EAAQvB,SAASwB,cAAc,SACrCD,EAAME,aAAa,kBAAmB,IACtCF,EAAMG,YAAY1B,SAAS2B,eAAeL,IAC1CtB,SAAS4B,KAAKC,QAAQN,GAEtBhC,KAAKC,oBAAoBsC,KAAKP,EAC/B,CAEAQ,SAAAA,CAAUC,GACT,MAAM7B,EAAUH,SAASwB,cAAc,OACvCrB,EAAQ8B,UAAYD,EACpBhC,SAASkC,KAAKR,YAAYvB,GAE1BZ,KAAKE,kBAAkBqC,KAAK3B,EAC7B,CAEAgC,YAAAA,CAAajC,EAAkBI,GAE9Bf,KAAKG,0BAA0BoC,KAAK,CAAE5B,WAAUI,SAGhDf,KAAKI,wBACN"}