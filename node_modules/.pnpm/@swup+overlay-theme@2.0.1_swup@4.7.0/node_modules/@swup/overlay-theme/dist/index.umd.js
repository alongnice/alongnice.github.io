!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t||self).SwupOverlayTheme=e()}(this,function(){function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},t.apply(this,arguments)}const e=t=>String(t).split(".").map(t=>String(parseInt(t||"0",10))).concat(["0","0"]).slice(0,3).join(".");class a{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach(t=>t()),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error("You must define a name of plugin when creating a class.")}_afterUnmount(){}_checkRequirements(){return"object"!=typeof this.requires||Object.entries(this.requires).forEach(([t,a])=>{if(!function(t,a,o){const r=function(t,e){var a;if("swup"===t)return null!=(a=e.version)?a:"";{var o;const a=e.findPlugin(t);return null!=(o=null==a?void 0:a.version)?o:""}}(t,o);return!!r&&((t,a)=>a.every(a=>{const[,o,r]=a.match(/^([\D]+)?(.*)$/)||[];var s,n;return((t,e)=>{const a={"":t=>0===t,">":t=>t>0,">=":t=>t>=0,"<":t=>t<0,"<=":t=>t<=0};return(a[e]||a[""])(t)})((n=r,s=e(s=t),n=e(n),s.localeCompare(n,void 0,{numeric:!0})),o||">=")}))(r,a)}(t,a=Array.isArray(a)?a:[a],this.swup)){const e=`${t} ${a.join(", ")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${e}`)}}),!0}on(t,e,a={}){var o;e=!(o=e).name.startsWith("bound ")||o.hasOwnProperty("prototype")?e.bind(this):e;const r=this.swup.hooks.on(t,e,a);return this.handlersToUnregister.push(r),r}once(e,a,o={}){return this.on(e,a,t({},o,{once:!0}))}before(e,a,o={}){return this.on(e,a,t({},o,{before:!0}))}replace(e,a,o={}){return this.on(e,a,t({},o,{replace:!0}))}off(t,e){return this.swup.hooks.off(t,e)}}class o extends a{constructor(...t){super(...t),this._originalAnimationSelectorOption="",this._addedStyleElements=[],this._addedHTMLContent=[],this._classNameAddedToElements=[],this._addClassNameToElement=()=>{this._classNameAddedToElements.forEach(t=>{Array.from(document.querySelectorAll(t.selector)).forEach(e=>{e.classList.add(`swup-transition-${t.name}`)})})}}_beforeMount(){this._originalAnimationSelectorOption=String(this.swup.options.animationSelector),this.swup.options.animationSelector='[class*="swup-transition-"]',this.swup.hooks.on("content:replace",this._addClassNameToElement)}_afterUnmount(){this.swup.options.animationSelector=this._originalAnimationSelectorOption,this._addedStyleElements.forEach(t=>{t.outerHTML=""}),this._addedStyleElements=[],this._addedHTMLContent.forEach(t=>{t.outerHTML=""}),this._addedHTMLContent=[],this._classNameAddedToElements.forEach(t=>{Array.from(document.querySelectorAll(t.selector)).forEach(t=>{t.className.split(" ").forEach(e=>{new RegExp("^swup-transition-").test(e)&&t.classList.remove(e)})})}),this.swup.hooks.off("content:replace",this._addClassNameToElement)}applyStyles(t){const e=document.createElement("style");e.setAttribute("data-swup-theme",""),e.appendChild(document.createTextNode(t)),document.head.prepend(e),this._addedStyleElements.push(e)}applyHTML(t){const e=document.createElement("div");e.innerHTML=t,document.body.appendChild(e),this._addedHTMLContent.push(e)}addClassName(t,e){this._classNameAddedToElements.push({selector:t,name:e}),this._addClassNameToElement()}}return class extends o{constructor(t){if(void 0===t&&(t={}),super(),this.name="SwupOverlayTheme",this.defaults={direction:"to-right",color:void 0,duration:void 0},this.directions=["to-left","to-right","to-top","to-bottom"],this.options={...this.defaults,...t},!this.directions.includes(this.options.direction))throw new Error(`Invalid direction: ${direction}`)}mount(){this.applyStyles("html{--swup-overlay-theme-color:#2d2e82;--swup-overlay-theme-duration:.6s;--swup-overlay-theme-delay:.2s;--swup-overlay-theme-scale:1.2;--swup-overlay-theme-skew:5deg}.swup-transition-overlay{--swup-overlay-x-scale:1;--swup-overlay-y-scale:1;--swup-overlay-skew-direction:1;--swup-overlay-width-value:calc(100vw*var(--swup-overlay-x-scale));--swup-overlay-height-value:calc(100vh*var(--swup-overlay-y-scale));--swup-overlay-transform-x-value:calc(100%*var(--swup-overlay-x-scale));--swup-overlay-transform-y-value:calc(100%*var(--swup-overlay-y-scale));--swup-overlay-top-value:calc((1 - var(--swup-overlay-y-scale))*0.5*100vh);--swup-overlay-left-value:calc((1 - var(--swup-overlay-x-scale))*0.5*100vw);--swup-overlay-bottom-value:auto;--swup-overlay-right-value:auto;--swup-overlay-skew-value:calc(var(--swup-overlay-theme-skew)*var(--swup-overlay-skew-direction));background-color:var(--swup-overlay-theme-color);bottom:var(--swup-overlay-bottom-value);height:var(--swup-overlay-height-value);left:var(--swup-overlay-left-value);opacity:0;pointer-events:none;position:fixed;right:var(--swup-overlay-right-value);top:var(--swup-overlay-top-value);width:var(--swup-overlay-width-value);z-index:9999}html.is-changing .swup-transition-overlay{opacity:1;transition:transform var(--swup-overlay-theme-duration) var(--swup-overlay-theme-delay)}.swup-transition-overlay[data-direction=to-left],.swup-transition-overlay[data-direction=to-right]{--swup-overlay-x-scale:var(--swup-overlay-theme-scale)}.swup-transition-overlay[data-direction=to-right]{transform:translate3d(calc(var(--swup-overlay-transform-x-value)*-1),0,0) skewX(var(--swup-overlay-skew-value))}html.is-animating .swup-transition-overlay[data-direction=to-right]{transform:translateZ(0) skewX(var(--swup-overlay-skew-value))}.swup-transition-overlay[data-direction=to-left],html.is-rendering .swup-transition-overlay[data-direction=to-right]{transform:translate3d(var(--swup-overlay-transform-x-value),0,0) skewX(var(--swup-overlay-skew-value))}.swup-transition-overlay[data-direction=to-left]{--swup-overlay-skew-direction:-1}html.is-animating .swup-transition-overlay[data-direction=to-left]{transform:translateZ(0) skewX(var(--swup-overlay-skew-value))}html.is-rendering .swup-transition-overlay[data-direction=to-left]{transform:translate3d(calc(var(--swup-overlay-transform-x-value)*-1),0,0) skewX(var(--swup-overlay-skew-value))}.swup-transition-overlay[data-direction=to-bottom],.swup-transition-overlay[data-direction=to-top]{--swup-overlay-y-scale:var(--swup-overlay-theme-scale)}.swup-transition-overlay[data-direction=to-bottom]{transform:translate3d(0,calc(var(--swup-overlay-transform-y-value)*-1),0) skewY(var(--swup-overlay-skew-value))}html.is-animating .swup-transition-overlay[data-direction=to-bottom]{transform:translateZ(0) skewY(var(--swup-overlay-skew-value))}.swup-transition-overlay[data-direction=to-top],html.is-rendering .swup-transition-overlay[data-direction=to-bottom]{transform:translate3d(0,var(--swup-overlay-transform-y-value),0) skewY(var(--swup-overlay-skew-value))}.swup-transition-overlay[data-direction=to-top]{--swup-overlay-skew-direction:-1}html.is-animating .swup-transition-overlay[data-direction=to-top]{transform:translateZ(0) skewY(var(--swup-overlay-skew-value))}html.is-rendering .swup-transition-overlay[data-direction=to-top]{transform:translate3d(0,calc(var(--swup-overlay-transform-y-value)*-1),0) skewY(var(--swup-overlay-skew-value))}"),this.applyHTML(this.createOverlay())}createOverlay(){const{direction:t}=this.options;return`\n\t\t\t<div\n\t\t\t\tclass="swup-transition-overlay"\n\t\t\t\tdata-direction="${t}"\n\t\t\t\tstyle="--swup-overlay-theme-color:${void 0!==this.options.color?this.options.color:"inherit"};--swup-overlay-theme-duration:${void 0!==this.options.duration?`${this.options.duration}ms`:"inherit"};"\n\t\t\t></div>\n\t\t`}}});
//# sourceMappingURL=index.umd.js.map
