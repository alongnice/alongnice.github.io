{"version":3,"file":"index.umd.js","sources":["../node_modules/@swup/plugin/dist/index.modern.js","../node_modules/on-demand-live-region/on-demand-live-region.js","../node_modules/focus-options-polyfill/index.js","../src/index.ts"],"sourcesContent":["function r(){return r=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r},r.apply(this,arguments)}const n=r=>String(r).split(\".\").map(r=>String(parseInt(r||\"0\",10))).concat([\"0\",\"0\"]).slice(0,3).join(\".\");class e{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach(r=>r()),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error(\"You must define a name of plugin when creating a class.\")}_afterUnmount(){}_checkRequirements(){return\"object\"!=typeof this.requires||Object.entries(this.requires).forEach(([r,e])=>{if(!function(r,e,t){const s=function(r,n){var e;if(\"swup\"===r)return null!=(e=n.version)?e:\"\";{var t;const e=n.findPlugin(r);return null!=(t=null==e?void 0:e.version)?t:\"\"}}(r,t);return!!s&&((r,e)=>e.every(e=>{const[,t,s]=e.match(/^([\\D]+)?(.*)$/)||[];var o,i;return((r,n)=>{const e={\"\":r=>0===r,\">\":r=>r>0,\">=\":r=>r>=0,\"<\":r=>r<0,\"<=\":r=>r<=0};return(e[n]||e[\"\"])(r)})((i=s,o=n(o=r),i=n(i),o.localeCompare(i,void 0,{numeric:!0})),t||\">=\")}))(s,e)}(r,e=Array.isArray(e)?e:[e],this.swup)){const n=`${r} ${e.join(\", \")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${n}`)}}),!0}on(r,n,e={}){var t;n=!(t=n).name.startsWith(\"bound \")||t.hasOwnProperty(\"prototype\")?n.bind(this):n;const s=this.swup.hooks.on(r,n,e);return this.handlersToUnregister.push(s),s}once(n,e,t={}){return this.on(n,e,r({},t,{once:!0}))}before(n,e,t={}){return this.on(n,e,r({},t,{before:!0}))}replace(n,e,t={}){return this.on(n,e,r({},t,{replace:!0}))}off(r,n){return this.swup.hooks.off(r,n)}}export{e as default};\n//# sourceMappingURL=index.modern.js.map\n","/* global define */\n\n(function (global) {\n  'use strict'\n\n  // Constructor\n  function OnDemandLiveRegion (options) {\n    options = options || {}\n\n    // The default settings for the module.\n    this.settings = {\n      level: 'polite',\n      parent: 'body',\n      idPrefix: 'live-region-',\n      delay: 0\n    }\n\n    // Overwrite defaults where they are provided in options\n    for (var setting in options) {\n      if (options.hasOwnProperty(setting)) {\n        this.settings[setting] = options[setting]\n      }\n    }\n\n    // Cast parent as DOM node\n    this.settings.parent = document.querySelector(this.settings.parent)\n  }\n\n  // 'Say' method\n  OnDemandLiveRegion.prototype.say = function (thingToSay, delay) {\n    // Get rid of old live region if it exists\n    var oldRegion = this.settings.parent.querySelector('[id^=\"' + this.settings.idPrefix + '\"]') || false\n    if (oldRegion) {\n      this.settings.parent.removeChild(oldRegion)\n    }\n\n    // Did an override level get set?\n    delay = delay || this.settings.delay\n\n    // Create fresh live region\n    this.currentRegion = document.createElement('span')\n    this.currentRegion.id = this.settings.idPrefix + Math.floor(Math.random() * 10000)\n\n    // Determine redundant role\n    var role = this.settings.level !== 'assertive' ? 'status' : 'alert'\n\n    // Add role and aria-live attribution\n    this.currentRegion.setAttribute('aria-live', this.settings.level)\n    this.currentRegion.setAttribute('role', role)\n\n    // Hide live region element, but not from assistive technologies\n    this.currentRegion.setAttribute('style', 'clip: rect(1px, 1px, 1px, 1px); height: 1px; overflow: hidden; position: absolute; white-space: nowrap; width: 1px')\n\n    // Add live region to its designated parent\n    this.settings.parent.appendChild(this.currentRegion)\n\n    // Populate live region to trigger it\n    window.setTimeout(function () {\n      this.currentRegion.textContent = thingToSay\n    }.bind(this), delay)\n\n    return this\n  }\n\n  // Export OnDemandLiveRegion\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = OnDemandLiveRegion\n  } else if (typeof define === 'function' && define.amd) {\n    define('OnDemandLiveRegion', [], function () {\n      return OnDemandLiveRegion\n    })\n  } else if (typeof global === 'object') {\n    // attach to window\n    global.OnDemandLiveRegion = OnDemandLiveRegion\n  }\n}(this))\n","// focus - focusOptions - preventScroll polyfill\n(function() {\n  if (\n    typeof window === \"undefined\" ||\n    typeof document === \"undefined\" ||\n    typeof HTMLElement === \"undefined\"\n  ) {\n    return;\n  }\n\n  var supportsPreventScrollOption = false;\n  try {\n    var focusElem = document.createElement(\"div\");\n    focusElem.addEventListener(\n      \"focus\",\n      function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n      },\n      true\n    );\n    focusElem.focus(\n      Object.defineProperty({}, \"preventScroll\", {\n        get: function() {\n          // Edge v18 gives a false positive for supporting inputs\n          if (\n            navigator &&\n            typeof navigator.userAgent !== 'undefined' &&\n            navigator.userAgent &&\n            navigator.userAgent.match(/Edge\\/1[7-8]/)) {\n              return supportsPreventScrollOption = false\n          }\n\n          supportsPreventScrollOption = true;\n        }\n      })\n    );\n  } catch (e) {}\n\n  if (\n    HTMLElement.prototype.nativeFocus === undefined &&\n    !supportsPreventScrollOption\n  ) {\n    HTMLElement.prototype.nativeFocus = HTMLElement.prototype.focus;\n\n    var calcScrollableElements = function(element) {\n      var parent = element.parentNode;\n      var scrollableElements = [];\n      var rootScrollingElement =\n        document.scrollingElement || document.documentElement;\n\n      while (parent && parent !== rootScrollingElement) {\n        if (\n          parent.offsetHeight < parent.scrollHeight ||\n          parent.offsetWidth < parent.scrollWidth\n        ) {\n          scrollableElements.push([\n            parent,\n            parent.scrollTop,\n            parent.scrollLeft\n          ]);\n        }\n        parent = parent.parentNode;\n      }\n      parent = rootScrollingElement;\n      scrollableElements.push([parent, parent.scrollTop, parent.scrollLeft]);\n\n      return scrollableElements;\n    };\n\n    var restoreScrollPosition = function(scrollableElements) {\n      for (var i = 0; i < scrollableElements.length; i++) {\n        scrollableElements[i][0].scrollTop = scrollableElements[i][1];\n        scrollableElements[i][0].scrollLeft = scrollableElements[i][2];\n      }\n      scrollableElements = [];\n    };\n\n    var patchedFocus = function(args) {\n      if (args && args.preventScroll) {\n        var evScrollableElements = calcScrollableElements(this);\n        if (typeof setTimeout === 'function') {\n          var thisElem = this;\n          setTimeout(function () {\n            thisElem.nativeFocus();\n            restoreScrollPosition(evScrollableElements);\n          }, 0);\n        } else {\n          this.nativeFocus();\n          restoreScrollPosition(evScrollableElements);\n        }\n      }\n      else {\n        this.nativeFocus();\n      }\n    };\n\n    HTMLElement.prototype.focus = patchedFocus;\n  }\n})();\n","import { Location, Visit, nextTick } from 'swup';\nimport Plugin from '@swup/plugin';\nimport OnDemandLiveRegion from 'on-demand-live-region';\n\nimport 'focus-options-polyfill';\n\nexport interface VisitA11y {\n\t/** How to announce the new content after it inserted */\n\tannounce: string | false | undefined;\n\t/** The element to focus after the content is replaced */\n\tfocus: string | false;\n}\n\ndeclare module 'swup' {\n\texport interface Visit {\n\t\t/** Accessibility settings for this visit */\n\t\ta11y: VisitA11y;\n\t}\n\texport interface HookDefinitions {\n\t\t'content:announce': undefined;\n\t\t'content:focus': undefined;\n\t}\n\texport interface Swup {\n\t\t/**\n\t\t * Announce something programmatically\n\t\t */\n\t\tannounce?: SwupA11yPlugin['announce'];\n\t}\n}\n\n/** Templates for announcements of the new page content. */\ntype Announcements = {\n\t/** How to announce the new page. */\n\tvisit: string;\n\t/** How to read a page url. Used as fallback if no heading was found. */\n\turl: string;\n};\n\n/** Translations of announcements, keyed by language. */\ntype AnnouncementTranslations = {\n\t[lang: string]: Announcements;\n};\n\ntype Options = {\n\t/** The selector for matching the main content area of the page. */\n\tcontentSelector: string;\n\t/** The selector for finding headings inside the main content area. */\n\theadingSelector: string;\n\t/** Whether to skip animations for users that prefer reduced motion. */\n\trespectReducedMotion: boolean;\n\t/** How to announce the new page title and url. */\n\tannouncements: Announcements | AnnouncementTranslations;\n\t/** Whether to focus elements with an [autofocus] attribute after navigation. */\n\tautofocus: boolean;\n\n\t/** How to announce the new page. @deprecated Use the `announcements` option.  */\n\tannouncementTemplate?: string;\n\t/** How to announce a url. @deprecated Use the `announcements` option. */\n\turlTemplate?: string;\n};\n\nexport default class SwupA11yPlugin extends Plugin {\n\tname = 'SwupA11yPlugin';\n\n\trequires = { swup: '>=4' };\n\n\tdefaults: Options = {\n\t\tcontentSelector: 'main',\n\t\theadingSelector: 'h1, h2, [role=heading]',\n\t\trespectReducedMotion: false,\n\t\tautofocus: false,\n\t\tannouncements: {\n\t\t\tvisit: 'Navigated to: {title}',\n\t\t\turl: 'New page at {url}'\n\t\t}\n\t};\n\n\toptions: Options;\n\n\tliveRegion: OnDemandLiveRegion;\n\n\tconstructor(options: Partial<Options> = {}) {\n\t\tsuper();\n\n\t\t// Merge deprecated announcement templates into new structure\n\t\toptions.announcements = {\n\t\t\t...this.defaults.announcements,\n\t\t\tvisit: options.announcementTemplate ?? String(this.defaults.announcements.visit),\n\t\t\turl: options.urlTemplate ?? String(this.defaults.announcements.url),\n\t\t\t...options.announcements\n\t\t};\n\n\t\t// Merge default options with user defined options\n\t\tthis.options = { ...this.defaults, ...options };\n\n\t\t// Create live region for announcing new page content\n\t\tthis.liveRegion = new OnDemandLiveRegion();\n\t}\n\n\tmount() {\n\t\t// Prepare new hooks\n\t\tthis.swup.hooks.create('content:announce');\n\t\tthis.swup.hooks.create('content:focus');\n\n\t\t// Prepare visit by adding a11y settings to visit object\n\t\tthis.before('visit:start', this.prepareVisit);\n\n\t\t// Mark page as busy during transitions\n\t\tthis.on('visit:start', this.markAsBusy);\n\t\tthis.on('visit:end', this.unmarkAsBusy);\n\n\t\t// Prepare announcement by reading new page heading\n\t\tthis.on('content:replace', this.prepareAnnouncement);\n\n\t\t// Announce new page and focus container after content is replaced\n\t\tthis.on('content:replace', this.handleNewPageContent);\n\n\t\t// Disable transition and scroll animations if user prefers reduced motion\n\t\tif (this.options.respectReducedMotion) {\n\t\t\tthis.before('visit:start', this.disableTransitionAnimations);\n\t\t\tthis.before('visit:start', this.disableScrollAnimations);\n\t\t\tthis.before('link:self', this.disableScrollAnimations);\n\t\t\tthis.before('link:anchor', this.disableScrollAnimations);\n\t\t}\n\n\t\t// Announce something programmatically\n\t\tthis.swup.announce = this.announce;\n\t}\n\n\tunmount() {\n\t\tthis.swup.announce = undefined;\n\t}\n\n\tmarkAsBusy() {\n\t\tdocument.documentElement.setAttribute('aria-busy', 'true');\n\t}\n\n\tunmarkAsBusy() {\n\t\tdocument.documentElement.removeAttribute('aria-busy');\n\t}\n\n\tprepareVisit(visit: Visit) {\n\t\tvisit.a11y = {\n\t\t\tannounce: undefined,\n\t\t\tfocus: this.options.contentSelector\n\t\t};\n\t}\n\n\tprepareAnnouncement(visit: Visit) {\n\t\t// Allow customizing announcement before this hook\n\t\tif (typeof visit.a11y.announce !== 'undefined') return;\n\n\t\tconst { contentSelector, headingSelector, announcements } = this.options;\n\t\tconst { href, url, pathname: path } = Location.fromUrl(window.location.href);\n\t\tconst lang = document.documentElement.lang || '*';\n\n\t\tconst templates: Announcements =\n\t\t\t(announcements as AnnouncementTranslations)[lang] ||\n\t\t\t(announcements as AnnouncementTranslations)['*'] ||\n\t\t\tannouncements;\n\t\tif (typeof templates !== 'object') return;\n\n\t\t// Look for first heading in content container\n\t\tconst heading = document.querySelector(`${contentSelector} ${headingSelector}`);\n\t\t// Get page title from aria attribute or text content\n\t\tlet title = heading?.getAttribute('aria-label') || heading?.textContent;\n\t\t// Fall back to document title, then url if no title was found\n\t\ttitle = title || document.title || this.parseTemplate(templates.url, { href, url, path });\n\t\t// Replace {variables} in template\n\t\tconst announcement = this.parseTemplate(templates.visit, { title, href, url, path });\n\n\t\tvisit.a11y.announce = announcement;\n\t}\n\n\tparseTemplate(str: string, replacements: Record<string, string>): string {\n\t\treturn Object.keys(replacements).reduce((str, key) => {\n\t\t\treturn str.replace(`{${key}}`, replacements[key] || '');\n\t\t}, str || '');\n\t}\n\n\thandleNewPageContent() {\n\t\t// We can't `await` nextTick() here because it would block ViewTransition callbacks\n\t\t// Apparently, during ViewTransition updates there is no microtask queue\n\t\tnextTick().then(async () => {\n\t\t\tthis.swup.hooks.call('content:announce', undefined, undefined, (visit) => {\n\t\t\t\tthis.announcePageName(visit);\n\t\t\t});\n\t\t\tthis.swup.hooks.call('content:focus', undefined, undefined, (visit) => {\n\t\t\t\tthis.focusPageContent(visit);\n\t\t\t});\n\t\t});\n\t}\n\n\tannouncePageName(visit: Visit) {\n\t\tif (visit.a11y.announce) {\n\t\t\tthis.liveRegion.say(visit.a11y.announce);\n\t\t}\n\t}\n\n\tannounce = (message: string): void => {\n\t\tthis.liveRegion.say(message);\n\t};\n\n\tasync focusPageContent(visit: Visit) {\n\t\t// Focus disabled for this visit?\n\t\tif (!visit.a11y.focus) return;\n\n\t\t// Found [autofocus] element?\n\t\tif (this.options.autofocus) {\n\t\t\tconst autofocusEl = this.getAutofocusElement();\n\t\t\tif (autofocusEl && autofocusEl !== document.activeElement) {\n\t\t\t\tthis.swup.hooks.once('visit:end', (v) => {\n\t\t\t\t\tif (v.id !== visit.id) return;\n\t\t\t\t\tautofocusEl.focus();\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Otherwise, find content container and focus it\n\t\tconst content = document.querySelector<HTMLElement>(visit.a11y.focus);\n\t\tif (content instanceof HTMLElement) {\n\t\t\tif (this.needsTabindex(content)) {\n\t\t\t\tcontent.setAttribute('tabindex', '-1');\n\t\t\t}\n\t\t\tcontent.focus({ preventScroll: true });\n\t\t}\n\t}\n\n\tgetAutofocusElement(): HTMLElement | undefined {\n\t\tconst focusEl = document.querySelector<HTMLElement>('body [autofocus]');\n\t\tif (focusEl && !focusEl.closest('inert, [aria-disabled], [aria-hidden=\"true\"]')) {\n\t\t\treturn focusEl;\n\t\t}\n\t}\n\n\tdisableTransitionAnimations(visit: Visit) {\n\t\tvisit.animation.animate = visit.animation.animate && this.shouldAnimate();\n\t}\n\n\tdisableScrollAnimations(visit: Visit) {\n\t\t// @ts-ignore: animate property is not defined unless Scroll Plugin installed\n\t\tvisit.scroll.animate = visit.scroll.animate && this.shouldAnimate();\n\t}\n\n\tshouldAnimate(): boolean {\n\t\treturn !window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n\t}\n\n\tneedsTabindex(el: HTMLElement): boolean {\n\t\treturn !el.matches('a, button, input, textarea, select, details, [tabindex]');\n\t}\n}\n"],"names":["n","r","String","split","map","parseInt","concat","slice","join","e","every","t","s","match","o","i","localeCompare","numeric","global","OnDemandLiveRegion","options","setting","this","settings","level","parent","idPrefix","delay","hasOwnProperty","document","querySelector","prototype","say","thingToSay","oldRegion","removeChild","currentRegion","createElement","id","Math","floor","random","role","setAttribute","appendChild","window","setTimeout","textContent","bind","module","HTMLElement","supportsPreventScrollOption","focusElem","addEventListener","event","preventDefault","stopPropagation","focus","Object","defineProperty","get","navigator","userAgent","undefined","nativeFocus","restoreScrollPosition","scrollableElements","length","scrollTop","scrollLeft","args","preventScroll","evScrollableElements","element","parentNode","rootScrollingElement","scrollingElement","documentElement","offsetHeight","scrollHeight","offsetWidth","scrollWidth","push","calcScrollableElements","thisElem","Plugin","constructor","super","name","requires","swup","defaults","contentSelector","headingSelector","respectReducedMotion","autofocus","announcements","visit","url","liveRegion","announce","message","announcementTemplate","urlTemplate","mount","hooks","create","before","prepareVisit","on","markAsBusy","unmarkAsBusy","prepareAnnouncement","handleNewPageContent","disableTransitionAnimations","disableScrollAnimations","unmount","removeAttribute","a11y","href","pathname","path","Location","fromUrl","location","templates","lang","heading","title","getAttribute","parseTemplate","announcement","str","replacements","keys","reduce","key","replace","_this","then","call","announcePageName","focusPageContent","Promise","resolve","reject","_this2","autofocusEl","getAutofocusElement","activeElement","once","v","content","needsTabindex","focusEl","closest","animation","animate","shouldAnimate","scroll","matchMedia","matches","el"],"mappings":"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"}