{"version":3,"file":"index.module.js","sources":["../src/index.ts"],"sourcesContent":["import { Handler } from 'swup';\nimport Plugin from '@swup/plugin';\n\ntype Options = {\n\t/** If set, only classes beginning with this string will be added/removed. */\n\tprefix: string;\n};\n\nexport default class SwupBodyClassPlugin extends Plugin {\n\tname = 'SwupBodyClassPlugin';\n\n\trequires = { swup: '>=4.6' };\n\n\tdefaults: Options = {\n\t\tprefix: ''\n\t};\n\toptions: Options;\n\n\tconstructor(options: Partial<Options> = {}) {\n\t\tsuper();\n\t\tthis.options = { ...this.defaults, ...options };\n\t}\n\n\tmount() {\n\t\tthis.on('content:replace', this.updateBodyClass);\n\t}\n\n\tprotected updateBodyClass: Handler<'content:replace'> = (visit) => {\n\t\tthis.updateClassNames(document.body, visit.to.document!.body);\n\t};\n\n\tprotected updateClassNames(el: HTMLElement, newEl: HTMLElement) {\n\t\tconst remove = [...el.classList].filter((className) => this.isValidClassName(className));\n\t\tconst add = [...newEl.classList].filter((className) => this.isValidClassName(className));\n\t\tel.classList.remove(...remove);\n\t\tel.classList.add(...add);\n\t}\n\n\tprotected isValidClassName(className: string) {\n\t\treturn className && className.startsWith(this.options.prefix);\n\t}\n}\n"],"names":["SwupBodyClassPlugin","Plugin","constructor","options","super","this","name","requires","swup","defaults","prefix","updateBodyClass","visit","updateClassNames","document","body","to","mount","on","el","newEl","remove","classList","filter","className","isValidClassName","add","startsWith"],"mappings":"4BAQqB,MAAAA,UAA4BC,EAUhDC,WAAAA,CAAYC,EAA4B,CAAE,GACzCC,QAAQC,KAVTC,KAAO,sBAEPC,KAAAA,SAAW,CAAEC,KAAM,cAEnBC,SAAoB,CACnBC,OAAQ,IAETP,KAAAA,oBAWUQ,gBAA+CC,IACxDP,KAAKQ,iBAAiBC,SAASC,KAAMH,EAAMI,GAAGF,SAAUC,KAAI,EAR5DV,KAAKF,QAAU,IAAKE,KAAKI,YAAaN,EACvC,CAEAc,KAAAA,GACCZ,KAAKa,GAAG,kBAAmBb,KAAKM,gBACjC,CAMUE,gBAAAA,CAAiBM,EAAiBC,GAC3C,MAAMC,EAAS,IAAIF,EAAGG,WAAWC,OAAQC,GAAcnB,KAAKoB,iBAAiBD,IACvEE,EAAM,IAAIN,EAAME,WAAWC,OAAQC,GAAcnB,KAAKoB,iBAAiBD,IAC7EL,EAAGG,UAAUD,UAAUA,GACvBF,EAAGG,UAAUI,OAAOA,EACrB,CAEUD,gBAAAA,CAAiBD,GAC1B,OAAOA,GAAaA,EAAUG,WAAWtB,KAAKF,QAAQO,OACvD"}