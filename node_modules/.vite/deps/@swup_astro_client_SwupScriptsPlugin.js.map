{
  "version": 3,
  "sources": ["../../.pnpm/@swup+scripts-plugin@2.1.0_swup@4.7.0/node_modules/@swup/scripts-plugin/src/index.ts"],
  "sourcesContent": ["import Plugin from '@swup/plugin';\n\nexport type Options = {\n\thead: boolean;\n\tbody: boolean;\n\toptin: boolean;\n};\n\nexport default class SwupScriptsPlugin extends Plugin {\n\tname = 'SwupScriptsPlugin';\n\n\trequires = {\n\t\tswup: '>=4'\n\t};\n\n\tdefaults: Options = {\n\t\thead: true,\n\t\tbody: true,\n\t\toptin: false\n\t};\n\n\toptions: Options;\n\n\tconstructor(options: Partial<Options> = {}) {\n\t\tsuper();\n\t\tthis.options = { ...this.defaults, ...options };\n\t}\n\n\tmount() {\n\t\tthis.on('content:replace', this.runScripts);\n\t}\n\n\trunScripts() {\n\t\tconst { head, body, optin } = this.options;\n\t\tconst scope = this.getScope({ head, body });\n\t\tif (!scope) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selector = optin\n\t\t\t? 'script[data-swup-reload-script]'\n\t\t\t: 'script:not([data-swup-ignore-script])';\n\n\t\tconst scripts = Array.from(scope.querySelectorAll<HTMLScriptElement>(selector));\n\t\tscripts.forEach((script) => this.runScript(script));\n\n\t\tthis.swup.log(`Executed ${scripts.length} scripts.`);\n\t}\n\n\trunScript(script: HTMLScriptElement) {\n\t\tconst element = document.createElement('script');\n\t\tfor (const { name, value } of script.attributes) {\n\t\t\telement.setAttribute(name, value);\n\t\t}\n\t\telement.textContent = script.textContent;\n\t\tscript.replaceWith(element);\n\n\t\treturn element;\n\t}\n\n\tgetScope({ head, body }: Pick<Options, 'head' | 'body'>) {\n\t\tif (head && body) return document;\n\n\t\tif (head) return document.head;\n\n\t\tif (body) return document.body;\n\n\t\treturn null;\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;AAQqB,IAAAA,IAAA,cAA0BC,EAAAA;EAe9CC,YAAYC,IAA4B,CAAE,GAAA;AACzCC,UAAAA,GAAQC,KAfTC,OAAO,qBAAA,KAEPC,WAAW,EACVC,MAAM,MAAA,GACNH,KAEDI,WAAoB,EACnBC,MAAAA,MACAC,MAAAA,MACAC,OAAAA,MAAO,GAGRT,KAAAA,UAAAA,QAICE,KAAKF,UAAOU,GAAA,CAAA,GAAQR,KAAKI,UAAaN,CAAAA;EACvC;EAEAW,QAAAA;AACCT,SAAKU,GAAG,mBAAmBV,KAAKW,UAAAA;EACjC;EAEAA,aAAAA;AACC,UAAA,EAAMN,MAAEA,GAAIC,MAAEA,IAAIC,OAAEA,GAAAA,IAAUP,KAAKF,SAC7Bc,IAAQZ,KAAKa,SAAS,EAAER,MAAAA,GAAMC,MAAAA,GAAAA,CAAAA;AACpC,QAAA,CAAKM,EACJ;AAGD,UAIME,IAAUC,MAAMC,KAAKJ,EAAMK,iBAJhBV,KACd,oCACA,uCAAA,CAAA;AAGHO,MAAQI,QAASC,CAAAA,OAAWnB,KAAKoB,UAAUD,EAAAA,CAAAA,GAE3CnB,KAAKG,KAAKkB,IAAgB,YAAAP,EAAQQ,MAAAA,WAAAA;EACnC;EAEAF,UAAUD,GAAAA;AACT,UAAMI,KAAUC,SAASC,cAAc,QAAA;AACvC,eAAK,EAAMxB,MAAEA,IAAIyB,OAAEA,EAAAA,KAAWP,EAAOQ,WACpCJ,CAAAA,GAAQK,aAAa3B,IAAMyB,CAAAA;AAK5B,WAHAH,GAAQM,cAAcV,EAAOU,aAC7BV,EAAOW,YAAYP,EAAAA,GAEZA;EACR;EAEAV,SAAAA,EAASR,MAAEA,GAAIC,MAAEA,GAAAA,GAAAA;AAChB,WAAID,KAAQC,KAAakB,WAErBnB,IAAamB,SAASnB,OAEtBC,KAAakB,SAASlB,OAAAA;EAG3B;AAAA;",
  "names": ["SwupScriptsPlugin", "Plugin", "constructor", "options", "super", "this", "name", "requires", "swup", "defaults", "head", "body", "optin", "_extends", "mount", "on", "runScripts", "scope", "getScope", "scripts", "Array", "from", "querySelectorAll", "forEach", "script", "runScript", "log", "length", "element", "document", "createElement", "value", "attributes", "setAttribute", "textContent", "replaceWith"]
}
